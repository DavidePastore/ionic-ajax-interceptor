!function(){"use strict";angular.module("ionic-ajax-interceptor",["ionic"])}(),function(n){"use strict";n.provider("AjaxInterceptor",["$httpProvider",function(n){var t={title:"Error",defaultMessage:"Unknown error",authorizationHeader:"Authorization",authorizationToken:null,stateChangeError:!0,fallbackIp:null,transformRequest:null,transformResponse:null};return{config:function(o){angular.extend(t,o),n.interceptors.push(["$rootScope","$q","$injector",function(n,o,r){return{request:function(o){return n.$broadcast("loading:show"),t.authorizationToken&&(o.headers[t.authorizationHeader]=t.authorizationToken),o},requestError:function(t){return n.$broadcast("loading:hide"),o.reject(t)},response:function(t){return n.$broadcast("loading:hide"),t},responseError:function(e){if(0==e.status){var i=e.config.url.split("/");if(i[2]!==t.fallbackIp){i[2]=t.fallbackIp,e.config.url=i.join("/");var a=r.get("$http");return a(e.config)}}return n.$broadcast("loading:hide"),o.reject(e)}}}]),t.transformRequest&&n.defaults.transformRequest.push(t.transformRequest),t.transformResponse&&n.defaults.transformResponse.push(t.transformResponse)},$get:["$ionicPopup","$ionicLoading","$rootScope","$http",function(n,o,r,e){var i=0,a=function(){0===i&&o.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),i++},u=function(){i--,0==i?o.hide():0>i&&(i=0)};return{run:function(){t.stateChangeError&&r.$on("$stateChangeError",function(o,r,e,i,a,u){n.alert({title:t.title,content:u.message||t.defaultMessage})}),r.$on("loading:show",function(){a()}),r.$on("loading:hide",function(){u()})},setAuthorizationToken:function(n){t.authorizationToken=n},showLoading:function(){a()},hideLoading:function(){u()}}}]}}])}(angular.module("ionic-ajax-interceptor")),function(n){"use strict";n.factory("iHttp",["$http",function(n){return function(t){return n(t)}}])}(angular.module("ionic-ajax-interceptor"));