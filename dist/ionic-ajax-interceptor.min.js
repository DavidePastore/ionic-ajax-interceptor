!function(){"use strict";angular.module("ionic-ajax-interceptor",["ionic"])}(),function(n){"use strict";n.provider("AjaxInterceptor",["$httpProvider",function(n){var o={title:"Error",defaultMessage:"Unknown error",authorizationHeader:"Authorization",authorizationToken:null,stateChangeError:!0},t=0;return{config:function(t){angular.extend(o,t),n.interceptors.push(function(n){return{request:function(t){return n.$broadcast("loading:show"),o.authorizationToken&&(t.headers[o.authorizationHeader]=o.authorizationToken),t},requestError:function(o){return n.$broadcast("loading:hide"),o},response:function(o){return n.$broadcast("loading:hide"),o},responseError:function(o){return n.$broadcast("loading:hide"),o}}})},$get:["$ionicPopup","$ionicLoading","$rootScope",function(n,r,i){var e=function(){r.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0})},a=function(){r.hide()};return{run:function(){o.stateChangeError&&i.$on("$stateChangeError",function(t,r,i,e,a,u){n.alert({title:o.title,content:u.message||o.defaultMessage})}),i.$on("loading:show",function(){0===t&&e(),t++}),i.$on("loading:hide",function(){t>0?a():t=1,t--})},setAuthorizationToken:function(n){o.authorizationToken=n},showLoading:function(){e()},hideLoading:function(){a()}}}]}}])}(angular.module("ionic-ajax-interceptor"));